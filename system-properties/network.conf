# PocoOptimize Network Configuration
# Network stack optimization for Poco F6
# Improves WiFi, 5G, and mobile data performance

# ===== TCP/IP Stack Optimization =====
# TCP buffer sizes (read, write, socket)
net.tcp.buffersize.default=4096,87380,524288,4096,16384,524288
net.tcp.buffersize.wifi=524288,1048576,2097152,524288,1048576,2097152
net.tcp.buffersize.lte=524288,1048576,3145728,524288,1048576,3145728
net.tcp.buffersize.5g=524288,1048576,6291456,524288,1048576,6291456
net.tcp.buffersize.umts=4096,87380,524288,4096,16384,524288
net.tcp.buffersize.hspa=4096,87380,1220608,4096,16384,1220608
net.tcp.buffersize.hsupa=4096,87380,1220608,4096,16384,1220608
net.tcp.buffersize.hsdpa=4096,87380,1220608,4096,16384,1220608
net.tcp.buffersize.hspap=4096,87380,1220608,4096,16384,1220608
net.tcp.buffersize.edge=4096,26280,35040,4096,16384,35040
net.tcp.buffersize.gprs=4096,8760,11680,4096,8760,11680
net.tcp.buffersize.evdo=4096,87380,524288,4096,16384,524288

# TCP congestion control algorithm (bbr for better throughput)
net.ipv4.tcp_congestion_control=bbr

# TCP window scaling
net.ipv4.tcp_window_scaling=1

# TCP timestamps (disable for privacy & slight performance gain)
net.ipv4.tcp_timestamps=0

# TCP selective acknowledgments
net.ipv4.tcp_sack=1

# TCP fast open
net.ipv4.tcp_fastopen=3

# ===== Network Performance =====
# Maximum socket read/write buffer
net.core.rmem_max=16777216
net.core.wmem_max=16777216

# Default socket buffer
net.core.rmem_default=524288
net.core.wmem_default=524288

# Network device backlog
net.core.netdev_max_backlog=5000

# TCP memory allocation
net.ipv4.tcp_mem=8388608 12582912 16777216
net.ipv4.tcp_rmem=4096 87380 16777216
net.ipv4.tcp_wmem=4096 65536 16777216

# ===== WiFi Optimization =====
# WiFi scan interval (seconds)
wifi.supplicant_scan_interval=120

# WiFi sleep policy (0=never, 1=only when plugged, 2=always)
wifi.sleep_policy=2

# WiFi frequency band (0=auto, 1=5GHz, 2=2.4GHz)
wifi.frequency_band=0

# WiFi background scan
persist.wifi.background_scan=true

# WiFi RSSI thresholds
persist.wifi.rssi.thresholds=-85,-80,-75,-70

# WiFi offload settings
persist.vendor.wifi.offload.enable=true

# WiFi power save
persist.vendor.wifi.power_save=1

# ===== Mobile Data Optimization =====
# Data network preference
ro.telephony.default_network=33,33

# LTE optimization
persist.vendor.radio.lte_optimization=true

# Data call response timeout
persist.vendor.radio.data_con_rprt=1

# Fast dormancy
ro.config.fast_dormancy=1
persist.vendor.radio.fast_dormancy=1

# ===== 5G Configuration =====
# 5G network mode
persist.vendor.radio.5g_mode_pref=1

# 5G icon display
persist.vendor.radio.5g.icon=true

# 5G SA/NSA mode
persist.vendor.radio.5g.sa_mode=1

# 5G data optimization
persist.vendor.radio.5g.optimize=true

# ===== DNS Configuration =====
# DNS cache size
net.dns.cache_size=1000

# DNS negative cache
net.dns.negative_cache_ttl=10

# DNS resolver
net.dns1=1.1.1.1
net.dns2=1.0.0.1

# ===== Network Security =====
# IP forwarding (disabled for security)
net.ipv4.ip_forward=0
net.ipv6.conf.all.forwarding=0

# SYN cookies protection
net.ipv4.tcp_syncookies=1

# Ignore ICMP redirects
net.ipv4.conf.all.accept_redirects=0
net.ipv6.conf.all.accept_redirects=0

# Ignore source routed packets
net.ipv4.conf.all.accept_source_route=0

# ===== Mobile Hotspot =====
# Tethering optimization
net.tethering.noprovisioning=true

# Hotspot performance
persist.vendor.hotspot.optimize=1

# ===== VoLTE & VoWiFi =====
# VoLTE enabled
persist.vendor.radio.volte.enable=1
persist.vendor.radio.volte.available=1

# VoWiFi enabled
persist.vendor.radio.vowifi.enable=1

# IMS registration
persist.vendor.radio.ims.enable=1

# ===== Network Latency =====
# Reduce network latency
net.ipv4.tcp_low_latency=1

# Network queue discipline
net.core.default_qdisc=fq

# ===== IPv6 Configuration =====
# IPv6 privacy extensions
net.ipv6.conf.all.use_tempaddr=2
net.ipv6.conf.default.use_tempaddr=2

# IPv6 router advertisements
net.ipv6.conf.all.accept_ra=1
net.ipv6.conf.default.accept_ra=1

# ===== QoS Settings =====
# Quality of Service
persist.vendor.net.qos.enable=1

# Traffic shaping
persist.vendor.net.traffic_shaping=1

# ===== NFC & Bluetooth Network =====
# NFC beam
ro.nfc.beam.enable=false

# Bluetooth tethering
ro.bluetooth.tethering.enabled=true

# ===== Packet Processing =====
# Offload checksums to hardware
net.core.gro_enable=1
net.ipv4.tcp_ecn=0

# Packet steering
net.core.rps_sock_flow_entries=32768

# ===== Carrier Aggregation =====
# Enable carrier aggregation for LTE
persist.vendor.radio.ca.enable=true
persist.vendor.radio.ca_combo=true

# ===== APN Optimization =====
# Prefer fast APN
persist.vendor.radio.prefer_fast_apn=1

# ===== Network Power Management =====
# Mobile data power optimization
persist.vendor.radio.power_optimize=1

# Network interface power save
persist.vendor.net.power_save=balanced

# ===== Miscellaneous =====
# HTTP response cache
net.http.response.cache_enabled=1
net.http.response.cache_size=10485760

# Socket keep-alive
net.ipv4.tcp_keepalive_time=300
net.ipv4.tcp_keepalive_probes=5
net.ipv4.tcp_keepalive_intvl=30

# MTU discovery
net.ipv4.tcp_mtu_probing=1

# Network statistics
net.stats_enabled=1
