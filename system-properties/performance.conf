# PocoOptimize Performance Configuration
# Advanced system properties for enhanced performance on Poco F6
# Apply with: adb shell setprop $(cat performance.conf)

# ===== CPU & Scheduler Optimization =====
# Enable performance mode
ro.performance.mode=1

# Dalvik VM Heap Optimization
dalvik.vm.heapsize=512m
dalvik.vm.heapgrowthlimit=256m
dalvik.vm.heapmaxfree=8m
dalvik.vm.heapminfree=2m
dalvik.vm.heapstartsize=16m
dalvik.vm.heaptargetutilization=0.75

# CPU Set Optimization for post-boot
sys.post_boot.cpu_set=0-7
sys.post_dexopt_cpu_set=0-7

# Disable CPU speed throttling for better performance
sys.use_speed_throttling=false

# ===== GPU Optimization =====
# Hardware acceleration
debug.hwui.renderer=skiagl
debug.renderengine.backend=skiaglthreaded
renderthread.skia.reduceopstasksplitting=true

# GPU frequency boost
debug.sf.hw=1
debug.egl.hw=1
debug.composition.type=gpu

# Disable GPU driver loading delay
ro.vendor.gpu.driver_delay_enable=false

# ===== Graphics & Rendering =====
# Surfaceflinger optimizations
debug.sf.early_phase_offset_ns=500000
debug.sf.early_app_phase_offset_ns=500000
debug.sf.early_gl_phase_offset_ns=3000000
debug.sf.early_gl_app_phase_offset_ns=15000000
debug.sf.use_phase_offsets_as_durations=1
debug.sf.late_sf_phase_offset_ns=10000000
debug.sf.late_app_phase_offset_ns=20000000

# Enable high-performance rendering
debug.sf.enable_gl_backpressure=1
debug.sf.latch_unsignaled=1
debug.gralloc.enable_fb_ubwc=1

# ===== Memory Optimization =====
# VM subsystem tuning
ro.vendor.qti.sys.fw.bservice_enable=true
ro.vendor.qti.sys.fw.bservice_limit=60000
ro.vendor.qti.sys.fw.bservice_age=5000

# Memory management
sys.mem.max_hidden_apps=16
ro.vendor.qti.sys.fw.bg_apps_limit=60

# ZRAM optimization
ro.zram.mark_idle_delay_mins=60
ro.zram.first_wb_delay_mins=180
ro.zram.periodic_wb_delay_hours=24

# ===== IO & Storage =====
# Read-ahead buffer optimization
sys.io.scheduler=cfq
ro.sys.fw.dex2oat_thread_count=8

# Enable faster I/O
persist.sys.io.scheduler=deadline

# ===== Gaming Optimization =====
# Touch responsiveness
touch.pressure.scale=0.001
debug.performance.tuning=1

# View optimization for games
debug.sf.disable_backpressure=1

# Reduce input latency
ro.min.fling_velocity=8000
ro.max.fling_velocity=12000

# ===== Miscellaneous Performance =====
# USB configuration for ADB performance
sys.usb.config=adb
persist.sys.usb.config=adb

# Disable debug logging overhead
persist.sys.debug.multi_window=false
debug.atrace.tags.enableflags=0
persist.traced.enable=0

# Native bridge disable for performance
sys.dalvik.vm.native.bridge=0

# Proximity check disable for faster screen wake
gsm.proximity.enable=false

# Disable service call overhead
ro.config.nocheckin=1

# ===== Display & Refresh Rate =====
# High refresh rate optimization
ro.surface_flinger.max_frame_buffer_acquired_buffers=3
ro.surface_flinger.running_without_sync_framework=true
ro.surface_flinger.vsync_event_phase_offset_ns=2000000
ro.surface_flinger.vsync_sf_event_phase_offset_ns=6000000

# Force 120Hz when possible (comment out for battery saving)
# ro.vendor.display.default_fps=120

# ===== Audio Optimization =====
# Low latency audio
audio.deep_buffer.media=true
audio.offload.video=true
af.fast_track_multiplier=1

# ===== Misc System =====
# Faster boot
ro.config.hw_quickpoweron=true
persist.sys.shutdown.mode=hibernate

# Disable unnecessary services at boot
config.disable_consumerir=true
ro.config.hw_eyes_protection=false

# Camera optimization
camera.disable_zsl_mode=0
persist.vendor.camera.HAL3.enabled=1
